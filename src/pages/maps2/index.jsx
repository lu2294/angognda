import React, { Component } from 'react'
// import { center, zoom, CRS, clusterMaxZoom, clusterMinZoom} from 'config/defaultValue.config'
import './index.less'

const L = window.L

var heatLayer1 = null;
var heatLayer2 = null;
var map;
const data = [
  [31.67621971778903,118.55621337890624,Math.random() * 60],
  [31.676055367707246,118.55622410774232,Math.random() * 60],
  [31.674329674286227,118.55935692787169,Math.random() * 60],
  [31.673261371811506,118.55414271354675,Math.random() * 60],
  [31.673256806389936,118.55460941791533],
  [31.67323397927874,118.55436801910399,Math.random() * 60],
  [31.6730422313233,118.55431437492369,Math.random() * 60],
  [31.6730422313243,118.55431437496369,Math.random() * 60],
  [31.67147170935871,118.55530142784119,Math.random() * 60],
  [31.671348440522294,1118.5554140806198],
  [31.671184081819224,118.55531752109528,Math.random() * 60],
  [31.67135300603768,118.55531215667725,Math.random() * 60],
  [31.671270826726538,118.55526387691498],
  [31.674156190104792,118.54933619499208,Math.random() * 60],
  [31.674484896700154,118.54941129684447,Math.random() * 60],
  [31.674914039670757,118.55009794235231,Math.random() * 60],
  [31.674147059349405,118.54884266853331],
  [31.674338805023623,118.54995846748352,Math.random() * 60],
  [31.676849723741093,118.55188965797424,Math.random() * 60],
  [31.676639722232018,118.55149269104004,Math.random() * 60],
  [31.676374937043622,118.55156779289246,Math.random() * 60],
  [31.67679494078452,118.55159997940063,Math.random() * 60],
  [31.674713164484597,118.55511903762817,Math.random() * 60],

  [31.674302282068588,118.55522632598877,Math.random() * 40],
  [31.675060130442304,118.55519413948059,Math.random() * 60],
  [31.675498401377933,118.5551404953003,Math.random() * 60],
  [31.675516662622048,118.55457186698915,Math.random() * 60],
  [31.675206220984013,118.55456113815306,Math.random() * 60],
  [31.674777079363693,118.5546040534973,Math.random() * 60],
  [31.67429315132758,118.5546040534973,Math.random() * 60],
  [31.674338805023623,118.54995846748352,Math.random() * 60],
  [31.67602797599868, 118.55502247810364],[31.676265370537905, 118.5550332069397]
, [31.676530156038734, 118.55496883392333,Math.random() * 50]
,[31.676712766289043, 118.55485081672667]
,[31.67674928829602, 118.55560183525085,Math.random() * 50]
,[31.677032333362927, 118.55564475059508]
, [31.6773975515292, 118.55605244636534,Math.random() * 50]
,[31.676466242366292, 118.55385303497314]
,[31.676055367707246, 118.55371356010436,Math.random() * 50]
,[31.676539286559777, 118.55384230613707]
,[31.67716015988453, 118.55396032333373,Math.random() * 50]
,[31.676685374774387, 118.55462551116943]
,[31.67628363163116, 118.5544216632843,Math.random() * 50]
]
const data1 = [
  [31.673206586737933, 118.55385303497314,Math.random() * 60],
  [31.673297895175917, 118.55432510375975,Math.random() * 60],
  [31.67325224096816, 118.55457186698915],
  [31.673005707858334, 118.55445384979248],
  [31.672969184378992, 118.55407834053038],
  [31.672969184378992, 118.5538637638092],

  [31.67296005350692, 118.55436801910399,Math.random() * 60],
  [31.67323397927874, 118.55477571487427],
  [31.6730331004584, 118.55473279953004],
  [31.672868744736757, 118.55470061302185],
   [31.673188325039558, 118.55419635772704],
  [31.671553888492095, 118.55531215667725],
  [31.671462578339412, 118.55522632598877],
  [31.671426054253192, 118.55506539344788,Math.random() * 60],
  [31.671581281520417, 118.55494737625122,Math.random() * 60],
  [31.671489971394628, 118.55490446090698],
  [31.67160867454062, 118.55471134185791],
  [31.671699984549697, 118.55511903762817],

   [31.67119777838892, 118.55797290802002],
 [31.671106467886094, 118.55817675590515],
[31.671124729993842, 118.5584771633148]
,[31.671252564647514, 118.55859518051146,Math.random() * 60]
,[31.671416923229394, 118.55871319770812]
,[31.671553888492095, 118.55883121490477]
,[31.671672591556387, 118.55884194374086]
,[31.671763901502615, 118.55884194374086]
,[31.671836949394958, 118.55884194374086]
,[31.671937390153087, 118.55879902839659,Math.random() * 60]
,[31.672028699838965, 118.55872392654419]
,[31.672193057047302, 118.5585844516754]
,[31.67228436648182, 118.55842351913451],

[31.67082340475689, 118.55275869369508,Math.random() * 60]
,[31.670951239825307, 118.55264067649841,Math.random() * 60]
,[31.67116125419858, 118.5524368286133,Math.random() * 60]
,[31.67132561294203, 118.5524368286133]
, [31.671535626468746, 118.55235099792479]
, [31.67182781841154, 118.55238318443297]
, [31.671955652097456, 118.5524046421051]
, [31.67210174752302, 118.55237245559692]
, [31.67228436648182, 118.55238318443297]
,[31.672466985081492, 118.55241537094116,Math.random() * 60]
,[31.67299657698985, 118.55251193046568]
,[31.673188325039558, 118.55251193046568,Math.random() * 60]
,[31.673708782035924, 118.5522973537445,Math.random() * 60]
,[31.673708782035924, 118.5520076751709,Math.random() * 60]
,[31.6736905204363, 118.55186820030211,Math.random() * 50]
,[31.673699651236547, 118.5515785217285],

[31.674183582365504, 118.55933547019958,Math.random() * 50]
,[31.674338805023623, 118.5591959953308]
, [31.674457504528316, 118.55907797813414,Math.random() * 50]
,[31.674503158143548, 118.55877757072449]
, [31.674704033783993, 118.55867028236388]
,[31.674987085085245, 118.55852007865907,Math.random() * 50]
,[31.675598838176015, 118.55852007865907,Math.random() * 50]
, [31.67591840908356, 118.55855226516722,Math.random() * 50]
,[31.67616493446077, 118.5585629940033]
, [31.676374937043622, 118.55849862098694,Math.random() * 50]
,[31.676594069667207, 118.5585629940033]
,[31.6766488527423, 118.55875611305235,Math.random() * 50],


[31.67419271311728, 118.55193257331848,Math.random() * 50]
,[31.67419271311728, 118.5521900653839]
,[31.67419271311728, 118.55253338813782,Math.random() * 50]
,[31.674165320859263, 118.55171799659729]
, [31.674740556581018, 118.55234026908873,Math.random() * 50]
, [31.674457504528316, 118.55242609977721]
,[31.674977954411588, 118.55237245559692,Math.random() * 50]
,[31.675261004877907, 118.55234026908873]
,[31.675224482285582, 118.552029132843,Math.random() * 50]
,[31.674904908989898, 118.55236172676086]
 
]
class ZMap extends Component {
    componentDidMount() {
        this.initMainMap()
    }
    initMainMap() {
      map = L.map('mainmap');
      var baseLayers = {
        "高德地图": L.tileLayer('http://webrd0{s}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}', {
            subdomains: "1234"
        }).addTo(map),
        '高德影像': L.layerGroup([L.tileLayer('http://webst0{s}.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}', {
            subdomains: "1234"
        }), L.tileLayer('http://t{s}.tianditu.cn/DataServer?T=cta_w&X={x}&Y={y}&L={z}', {
            subdomains: "1234"
        })]),
        "天地图": L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
            key: 'BC9A493B41014CAABB98F0471D759707',
            styleId: 22677
        }),
        'GeoQ灰色底图': L.tileLayer('http://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetPurplishBlue/MapServer/tile/{z}/{y}/{x}')
    };
    var layercontrol = L.control.layers(baseLayers,{}, {
      position: "topright"
  }).addTo(map);
  map.setView([31.673956653099, 118.554346561431], 17);
  var  heatPoints = [];
  
  for(let i = 0;i<100;i++){
    heatPoints[i] = [Math.random() * 0.00000000003 + 31.67621971778903, Math.random() * 0.5 + 118.000000000000004, Math.random() * 60]

  }
  heatLayer1 = L.heatLayer(data,{radius:20,minOpacity: 0.5 }).addTo(map);
  map.on('click', function(e) {
    console.log([e.latlng.lat,e.latlng.lng]);
} );
 
    }
    click1 = () =>{
      map.hasLayer(heatLayer1) && map.removeLayer(heatLayer1)
      if(!map.hasLayer(heatLayer2)) heatLayer2 = L.heatLayer(data1,{radius:20,minOpacity: 0.5 }).addTo(map);
    }
    click2 = () =>{
      console.log(map)
      map.hasLayer(heatLayer2) && map.removeLayer(heatLayer2)
      if(!map.hasLayer(heatLayer1))heatLayer1 = L.heatLayer(data,{radius:20,minOpacity: 0.5 }).addTo(map);
    }

    render() {
        return (
          <>
            <div id="mainmap" style={{ width: '100%', height: '100%' }}></div>
            <div className="timer">
              <button onClick={this.click1}>09:00-17:30</button>
              <button onClick={this.click2}>17:30-22:30</button>
            </div>
            </>
        )
    }
}

export default ZMap
